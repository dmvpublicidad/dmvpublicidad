!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("prop-types"),require("coreUtilsLib"),require("create-react-class"),require("react"),require("reactDOM"));else if("function"==typeof define&&define.amd)define(["lodash","prop-types","coreUtilsLib","create-react-class","react","reactDOM"],t);else{var o="object"==typeof exports?t(require("lodash"),require("prop-types"),require("coreUtilsLib"),require("create-react-class"),require("react"),require("reactDOM")):t(e.lodash,e["prop-types"],e.coreUtilsLib,e["create-react-class"],e.react,e.reactDOM);for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(this,function(e,t,o,n,i,r){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=85)}({0:function(t,o){t.exports=e},1:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(0),r=o(2);var s=r.shape({languageCode:r.string,name:r.string,iconUrl:r.string}),a=r.shape({bottom:r.oneOfType([r.string,r.number]),height:r.oneOfType([r.string,r.number]),left:r.oneOfType([r.string,r.number]),position:r.string,right:r.oneOfType([r.string,r.number]),top:r.oneOfType([r.string,r.number]),width:r.oneOfType([r.string,r.number])}),c=r.shape({px:r.number,vw:r.number}),u=r.objectOf(r.shape({id:r.string.isRequired,width:r.number.isRequired,height:r.number.isRequired,alignment:r.number.isRequired}));e.exports=function e(t,o){return i.reduce(t,function(t,r,s){var a=o?o+"."+s:s;switch(void 0===r?"undefined":n(r)){case"function":return(r=function(e){var t=e.bind(null);return t.isRequired=e.isRequired.bind(null),t}(r)).id=a,r.isRequired.id=a,i.set(t,s,r);case"object":return i.set(t,s,e(r,a));default:throw new Error("wtf:"+s)}},{})}({isInSSR:r.bool,isMobileView:r.bool,isDebugMode:r.bool,isQAMode:r.bool,hideComponentsListForQa:r.string,getRootIdsWhichShouldBeRendered:r.func,isExperimentOpen:r.func,setCustomClickOccurred:r.func,reportBI:r.func,currentUrl:r.object,siteWidth:r.number,rootWidth:r.string,animations:r.object,isSiteBusy:r.func,isPreviewMode:r.bool,isCurrentPageLandingPage:r.bool,santaBase:r.string,RendererModel:{multilingual:{isEnabled:r.bool,languages:r.arrayOf(s),currentLanguage:s,setCurrentLanguageCode:r.func,originalLanguage:s}},currentUrlPageId:r.string,Modes:{getActiveModes:r.func,activateModeById:r.func,deactivateModeById:r.func,switchModesByIds:r.func},SiteAspects:{windowScrollEvent:r.object,windowResizeEvent:r.object,actionsAspect:r.object},NativeComponentSantaTypes:{publicData:r.object,sectionUrls:r.arrayOf(r.object),widgetStyle:r.object,instance:r.string,resizeComponent:r.func,viewMode:r.string,deviceType:r.string,appLoadBI:r.object},ColumnsContainer:{childrenData:u},Fonts:{fontsMap:r.array},Popover:{open:r.func,close:r.func,rootContentStyle:r.object,reportMouseIn:r.func,reportMouseOut:r.func,targetBounds:r.object,targetPortal:r.object},DocumentClickEvent:{registerToDocumentClickEvent:r.func,unRegisterToDocumentClickEvent:r.func},Container:{defaultBackgroundStyle:r.object,defaultContentArea:r.object},Component:{isCollapsed:r.bool,isHorizontallyDocked:r.bool,id:r.string,refInParent:r.string,rootId:r.string,pageId:r.string,compActions:r.object,structure:r.shape({componentType:r.string.isRequired,dataQuery:r.oneOfType([r.string,r.object]),propertyQuery:r.oneOfType([r.string,r.object]),designQuery:r.oneOfType([r.string,r.object]),behaviorQuery:r.oneOfType([r.string,r.object]),components:r.array,skin:r.string,styleId:r.string,id:r.string,type:r.string}),styleParam:{textAlignment:r.string,colorScheme:r.string},childrenLayout:r.object,childrenStyle:r.object,fixedChildrenIDs:r.array,rootNavigationInfo:r.shape({pageId:r.string.isRequired,title:r.string,pageAdditionalData:r.string,pageItemId:r.string,pageItemAdditionalData:r.string,transition:r.string,anchorData:r.string}),currentUrlPageId:r.string,pageStub:r.bool,styleId:r.string,skin:r.string,getStyleData:r.func,compProp:r.object,compData:r.object,compDesign:r.object,renderFixedPosition:r.bool,style:a,screenWidthStyle:a,meshParams:r.object,rotationInDegrees:r.number,scale:r.number,key:r.string,ref:r.string,currentUrlPageTitle:r.string,dimensions:r.shape({x:r.number.isRequired,y:r.number.isRequired,width:r.number.isRequired,height:r.number.isRequired}),compStaticBehaviors:r.array,theme:r.object,compBehaviors:r.array,trackBehaviorsToExecute:r.func,isHiddenOnStart:r.bool,shouldHideAnimatable:r.bool},Theme:{all:r.object,colors:r.array,colorsMap:r.array,THEME_DATA:r.object},Behaviors:{handleAction:r.func,registerBehaviors:r.func,setBehaviorsForActions:r.func,convertBehaviors:r.func},Layout:{reLayoutIfPending:r.func,registerReLayoutPending:r.func,registerLayoutFunc:r.func,isMeshLayoutMechanism:r.bool},Utils:{logging:{performance:{now:r.func}},logger:r.shape({error:r.func.isRequired})},Device:{isTouchDevice:r.bool,isMobileDevice:r.bool,devicePixelRatio:r.number},Mobile:{cannotHideIframeWithinRoundedCorners:r.bool,siteZoomRatio:r.number,invertedZoomRatio:r.number,orientationZoomFix:r.number,mobileZoom:r.number},RenderFlags:{componentPreviewState:r.string,componentViewMode:r.string,renderFixedPositionContainers:r.bool,shouldResetComponent:r.bool,isPlayingAllowed:r.bool},RenderRealtimeConfig:{previewTooltipCallback:r.func,shouldHideTextComponent:r.bool,shouldHideComponent:r.bool,shouldShowComponentOnTop:r.bool,componentOpacity:r.number},RawSvg:{getRawSVG:r.string},Animations:{animationProperties:r.object},ServiceTopology:{scriptsDomainUrl:r.string,staticMediaUrl:r.string,scriptsLocationMap:r.object,getMediaFullStaticUrl:r.func},Browser:{browser:r.object},BrowserFlags:{cssFiltersSupported:r.bool},Images:{onImageUnmount:r.func},__DangerousSantaTypes:{getRenderedMasterPageHeight:r.func,getWindowSize:r.func},DAL:{setCompState:r.func,setCompData:r.func,setCompProps:r.func,removeCompState:r.func},PageGroup:{pagesToRender:r.array,createPageProps:r.func,stubifyPage:r.func},Repeater:{templateLayout:r.shape({repeaterWidth:r.number,templateWidth:r.number,docked:r.shape({left:c,top:c,right:c,bottom:c}),itemCount:r.number})},SiteButton:{link:r.object,impliedLink:r.object},Link:{renderInfo:r.shape({primaryPageId:r.string,currentUrl:r.object,currentUrlPageId:r.string,urlFormat:r.string,mainPageId:r.string,externalBaseUrl:r.string,unicodeExternalBaseUrl:r.string,publicBaseUrl:r.string,isFeedbackEndpoint:r.bool,isSiteHistoryEndpoint:r.bool,isViewerMode:r.bool,isWixSite:r.bool,isTemplate:r.bool,isUsingSlashUrlFormat:r.bool,isPremiumDomain:r.bool,serviceTopology:r.shape({staticDocsUrl:r.string,basePublicUrl:r.string,baseDomain:r.string}),routersConfigMap:r.object,allPageIds:r.array,pagesDataItemsMap:r.object,mapFromPageUriSeoToPageId:r.object,permalinksMap:r.object,rootNavigationInfo:r.object})},WixAds:{wixTopAdsHeight:r.number},WixUserSantaTypes:{userLanguage:r.string}})},10:function(e,t,o){"use strict";var n=o(0),i=o(8),r=o(2),s=o(3),a=o(11),c=o(12),u=o(1),p=o(15),l={click:"onClick",dblClick:"onDoubleClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},d=["wysiwyg.viewer.components.SiteBackground"];var f={mixins:[a,s.renderDoneMixin,c],propTypes:{id:u.Component.id.isRequired,className:r.string,structure:u.Component.structure,rotationInDegrees:u.Component.rotationInDegrees,siteWidth:u.siteWidth,style:u.Component.style,registerLayoutFunc:u.Layout.registerLayoutFunc,isCollapsed:u.Component.isCollapsed,compActions:u.Component.compActions,compBehaviors:u.Component.compBehaviors,isHorizontallyDocked:u.Component.isHorizontallyDocked,compProp:u.Component.compProp,registerReLayoutPending:u.Layout.registerReLayoutPending,reLayoutIfPending:u.Layout.reLayoutIfPending,isExperimentOpen:u.isExperimentOpen,animationProperties:u.Animations.animationProperties,isMobileView:u.isMobileView,shouldHideAnimatable:u.Component.shouldHideAnimatable},registerReLayout:function(){this.props.registerReLayoutPending&&this.props.registerReLayoutPending(this.props.id)},componentDidUpdate:function(){this.props.reLayoutIfPending&&this.callAfterRenderDone(this.props.reLayoutIfPending)},componentDidMount:function(){n.isFunction(this.measureComponent)&&this.props.registerLayoutFunc(i.findDOMNode(this),this.measureComponent)},shouldComponentUpdate:function(e,t){var o=!this.shouldComponentUpdateAnimatable||this.shouldComponentUpdateAnimatable(e,t),i=e.structure&&n.includes(d,e.structure.componentType),r=!n.isFunction(this.componentSpecificShouldUpdate)||this.componentSpecificShouldUpdate(e,t);return o&&r||i},updateRootRefDataStyles:function(e){if(!n.get(this.props,"compProp.isHidden")&&!this.props.isCollapsed){var t=function(e){var t=n.pick(e,n.values(l));if(n.get(this.props.compProp,"isDisabled"))return t;var o=n(this.props.compActions).pick(n.keys(l)).mapKeys(function(e,t){return l[t]}).mapValues(function(e){return this.handleAction.bind(this,e.name)}.bind(this)).value();return o.onClick&&this.props.setCustomClickOccurred&&(o.onClickCapture=function(e){n.includes(e.target.id,this.props.id)&&this.props.setCustomClickOccurred()}.bind(this)),n.assignWith(o,t,function(e,t){var o=this;return function(){e&&e.apply(o,arguments),t&&t.apply(o,arguments)}}.bind(this))}.call(this,e);n.assign(e,t)}(n.get(this.props,"compProp.isHidden")||this.props.shouldHideAnimatable)&&(e["data-hidden"]=!0),this.props.isCollapsed&&(e["data-collapsed"]=!0),e.style=function(e){var t=!(!n.invoke(this,"isScreenWidth")&&!this.props.isHorizontallyDocked),o=n.isFunction(this.ignoreDimensions)&&this.ignoreDimensions(),i=e.style,r=t&&p(this.props.isMobileView,this.props.siteWidth,n.get(this.props.structure,["layout","docked"])),s=n.omit(this.props.style,o&&["width","height"]),a=n.defaults({},i,r,s);return e["data-hidden"]&&(a.visibility="hidden"),e["data-collapsed"]&&n.assign(a,{visibility:"hidden",position:"absolute",overflow:"hidden",width:0,height:0,top:0,left:0}),!n.get(this.props.compProp,"isDisabled")&&n.has(this.props.compActions,"click")&&(a.cursor="pointer"),a}.call(this,e),e.className=function(e){return n.compact([e,this.props.className]).join(" ")}.call(this,e.className);var o=this.props.rotationInDegrees;o&&(e["data-angle"]=o)}};e.exports={baseComp:f,_testActionsMap:l}},11:function(e,t,o){"use strict";var n=o(8),i=o(0);e.exports={isAnimatable:!0,shouldChildrenUpdate:!0,componentWillMount:function(){this._animatableMixin={animationsCounter:0,deferredStates:[]},this._onAnimationEnded=i.noop},componentDidMount:function(){this._animatableMixin.setStateOrig=this.setState},componentWillUnmount:function(){this._animatableMixin.updateOnAnimationEnded=!1},animationStarted:function(){1==++this._animatableMixin.animationsCounter&&(this.setState=this.setStateDeferred,this.isCurrentlyAnimating=!0),this.shouldChildrenUpdate||i(this.refs).filter("isAnimatable").invokeMap("animationStarted").value()},animationEnded:function(e){e=!1!==e,this.shouldChildrenUpdate||i(this.refs).filter("isAnimatable").invokeMap("animationEnded",!1).value();var t=this._animatableMixin;if(t.animationsCounter&&0==--t.animationsCounter&&(this.setState=t.setStateOrig,this.isCurrentlyAnimating=!1,i.invoke(this,"_onAnimationEnded")),e)if(t.deferredStates.length){for(var o=t.deferredStates,r=0;r<o.length;r+=2)t.setStateOrig.call(this,o[r],o[r+1]);o.length=0}else t.updateOnAnimationEnded&&this.forceUpdate();t.updateOnAnimationEnded=!1,!0===this.forceRedrawOnAnimationEnded&&function(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}(n.findDOMNode(this))},setStateDeferred:function(e,t){var o=this._animatableMixin.deferredStates,n=o.length;0===n||o[n-1]||t?(o.push(e),o.push(t)):(i.assign(o[n-2],e),o[n-1]=t)},shouldComponentUpdateAnimatable:function(){var e=0===this._animatableMixin.animationsCounter;return e||(this._animatableMixin.updateOnAnimationEnded=!0),e},registerOnAnimationEnd:function(e){this._onAnimationEnded=e},unregisterOnAnimationEnd:function(){this._onAnimationEnded=i.noop}}},12:function(e,t,o){"use strict";var n=o(0),i=o(1);e.exports={propTypes:{id:i.Component.id,handleAction:i.Behaviors.handleAction,compActions:i.Component.compActions,now:i.Utils.logging.performance.now},handleAction:function(e,t){var o=n.get(this.props.compActions,e);o&&this.props.handleAction(o,function(e){var t={id:n.get(e,"id")||this.props.id,timeStamp:this.props.now()};return e?(t.timeStamp=e.timeStamp||t.timeStamp,n.defaults(t,e)):t}.call(this,t))}}},15:function(e,t,o){"use strict";var n=o(0),i=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px";return n.get(e,[t,o],0)},r=function(e){return n.hasIn(e,["left"])&&n.hasIn(e,["right"])},s=function(e){return i(e,"left","px")>0||i(e,"right","px")>0},a=function(e){return i(e,"left","vw")>0||i(e,"right","vw")>0},c=function(e){return r(e)&&function(e){return s(e)?i(e,"left")+"px":a(e)?i(e,"left","vw")+"vw":null}(e)||"0"},u=function(e){if(!r(e))return"100%";var t=function(e){return s(e)?i(e,"left")+i(e,"right")+"px":a(e)?i(e,"left","vw")+i(e,"right","vw")+"vw":null}(e);return t?"calc(100% - "+t+")":"100%"};e.exports=function(e,t,o){return e?{left:"0",marginLeft:"0",width:t+"px"}:{left:"0",marginLeft:c(o),width:u(o),minWidth:o?"initial":t+"px"}}},2:function(e,o){e.exports=t},3:function(e,t){e.exports=o},4:function(e,t){e.exports=n},7:function(e,t){e.exports=i},8:function(e,t){e.exports=r},85:function(e,t,o){"use strict";var n=o(86),i=o(89);e.exports={Component:n,Aspect:i}},86:function(e,t,o){"use strict";var n=o(0),i=o(7),r=o(8),s=o(4),a=o(2),c=o(10),u=o(1),p=o(87),l=o(88),d=function(e,t,o,r,s,a,c,u){return function(e,t){return i.createElement("div",{style:n.defaults({position:"absolute",pointerEvents:"none"},e)},t)}(r,function(e,t,o,r,s,a,c){var u={ref:r,style:n.assign({position:"absolute",width:"auto",height:"auto",pointerEvents:"auto"},p(s.position,s.alignment,s.horizontalOffset,s.verticalOffset)),onMouseEnter:a,onMouseLeave:c,"data-aid":e};return i.createElement("div",u,i.cloneElement(t,{style:o}))}(e,t,o,s,a,c,u))},f=s({displayName:"Popover",mixins:[c.baseComp],propTypes:{id:u.Component.id.isRequired,compProp:u.Component.compProp.isRequired,style:u.Component.style.isRequired,rootContentStyle:u.Popover.rootContentStyle,open:u.Popover.open.isRequired,close:u.Popover.close.isRequired,reportMouseIn:u.Popover.reportMouseIn.isRequired,reportMouseOut:u.Popover.reportMouseOut.isRequired,targetBounds:u.Popover.targetBounds,targetPortal:u.Popover.targetPortal,isQAMode:u.isQAMode,children:a.node},statics:{behaviors:{hidePopover:{methodName:"hide"},showPopover:{methodName:"show",params:["targetId"]}}},hide:function(e){this.props.close(),n.isFunction(e)&&e()},show:function(e,t){this.props.open(e),n.isFunction(t)&&t()},onDocumentClick:function(e){var t=this.contentWrapperRef.current.getBoundingClientRect();l.isInBounds(t,e.clientX,e.clientY)||this.props.close(!0)},componentWillMount:function(){this.contentWrapperRef=i.createRef()},render:function(){var e=this.props,t=e.id,o=e.compProp,s=e.structure,a=e.style,c=e.targetBounds,u=e.targetPortal,p=e.children,l=e.rootContentStyle;p&&n.assign(a,{pointerEvents:"none"});var f={id:t,style:a};if(this.props.isQAMode&&n.assign(f,{"data-comp":s.componentType}),this.props.targetBounds){var m=p[0],g=d(t,m,l,c,this.contentWrapperRef,o,this.props.reportMouseIn,this.props.reportMouseOut),h=r.createPortal(g,u);return i.createElement("div",f,h)}return i.createElement("div",f,p)}});e.exports=f},87:function(e,t,o){"use strict";e.exports=function(e,t,o,n){var i={};switch(e){case"left":i.right="calc(100% - "+o+"px)";break;case"right":i.left="calc(100% + "+o+"px)";break;case"top":i.bottom="calc(100% + "+n+"px)";break;case"bottom":i.top="calc(100% - "+n+"px)"}switch(e){case"left":case"right":switch(t){case"start":i.top=-1*n;break;case"center":i.top="calc(50% - "+n+"px)",i.transform="translateY(-50%)";break;case"end":i.bottom=-1*n}break;case"top":case"bottom":switch(t){case"start":i.left=o;break;case"center":i.left="calc(50% + "+o+"px)",i.transform="translateX(-50%)";break;case"end":i.right=o}}return i}},88:function(e,t,o){"use strict";e.exports={isInBounds:function(e,t,o){return t>e.x&&t<e.x+e.width&&o>e.y&&o<e.y+e.height}}},89:function(e,t,o){"use strict";var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();var i=o(0),r=new WeakMap,s=o(8),a=o(2),c=function(e,t){e.aspectProps.transaction(function(){e.aspectProps.deactivateMode(t),e.storageAPI.set(t,null),e.aspectProps.unRegisterToDocumentClickEvent(t)}),function(e,t){delete e.closeRequests[t],delete e.overrideClose[t],delete e.isInPopoverBounds[t]}(e,t)},u=function(e){var t=i.keys(e.storageAPI.getAll());e.aspectProps.transaction(function(){i.forEach(t,function(t){return c(e,t)})})},p=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.set(this,{storageAPI:o,aspectProps:t,isInPopoverBounds:{},closeRequests:{},overrideClose:{}})}return n(e,[{key:"onHostPropsChanged",value:function(e){var t=r.get(this);t.aspectProps.isPopoverAllowed&&!e.isPopoverAllowed&&u(t),e.isPopoverAllowed&&t.aspectProps.isMobileView!==e.isMobileView&&u(t),t.aspectProps=e}},{key:"openPopover",value:function(e,t){var o=this.getTargetPortal();if(o){var n=r.get(this),i=n.closeRequests[e];if(i)return clearTimeout(i),void delete n.closeRequests[e];n.aspectProps.transaction(function(){n.aspectProps.activateMode(e),n.storageAPI.set(e,function(e,t,o){var n=e.aspectProps.getComponentByPageAndCompId(t),i=s.findDOMNode(n).getBoundingClientRect(),r=o.getBoundingClientRect();return{top:i.y+e.aspectProps.getScrollPosition().y,left:i.x-r.x,width:i.width,height:i.height}}(n,t,o)),n.aspectProps.registerToDocumentClickEvent(e)})}}},{key:"reportMouseIn",value:function(e){var t=r.get(this);t.isInPopoverBounds[e]=!0;var o=t.closeRequests[e];o&&(clearTimeout(o),delete t.closeRequests[e],t.overrideClose[e]=!0)}},{key:"reportMouseOut",value:function(e){var t=r.get(this);delete t.isInPopoverBounds[e],t.overrideClose[e]&&this.closePopover(e)}},{key:"closePopover",value:function(e,t){var o=r.get(this);t?c(o,e):o.isInPopoverBounds[e]?o.overrideClose[e]=!0:o.closeRequests[e]=setTimeout(c.bind(null,o,e),500)}},{key:"getTargetBounds",value:function(e){return r.get(this).storageAPI.get(e)}},{key:"getTargetPortal",value:function(){return r.get(this).aspectProps.getTargetPortal()}}]),e}();p.aspectName="popoverAspect",p.hostPropTypes={deactivateMode:a.func.isRequired,activateMode:a.func.isRequired,getComponentByPageAndCompId:a.func.isRequired,getScrollPosition:a.func.isRequired,transaction:a.func.isRequired,getTargetPortal:a.func.isRequired,registerToDocumentClickEvent:a.func.isRequired,unRegisterToDocumentClickEvent:a.func.isRequired,isPopoverAllowed:a.bool.isRequired,isMobileView:a.bool.isRequired},e.exports=p}})});
//# sourceMappingURL=santa-component-popover.prod.js.map